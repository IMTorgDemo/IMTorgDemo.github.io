<!DOCTYPE html>
<html>
<head>
    <title>Processing Natural Language with Python and Friends // IMTorg Kbase</title>

        <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
        <meta property="og:title" content="Processing Natural Language with Python and Friends" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://imtorgdemo.github.io/posts/blog_nlp-intro_spacy/" />
    

    <link href="" rel="alternate" type="application/rss+xml" title="IMTorg Kbase" />
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="/favico/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/favico/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/favico/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/favico/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/favico/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/favico/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/favico/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/favico/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/favico/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favico/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favico/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favico/favicon-16x16.png">
	<link rel="manifest" href="/images/favico/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
    

    <link href="https://imtorgdemo.github.io/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="https://imtorgdemo.github.io/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://imtorgdemo.github.io/css/style.css">

    <meta name="generator" content="Hugo 0.102.3" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            
            <a href="https://imtorgdemo.github.io/">
            	<img src="/logo_CA_newblue.png" alt="Logo" style="max-width:100px; padding-top: 10px">
            </a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="/pages/about/">About</a>
                
                <a class="main-nav-link" href="/categories/">Categories</a>
                
                <a class="main-nav-link" href="/pages/search/">Search</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>

    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">Processing Natural Language with Python and Friends</h1>
        </header>
        
        <div class="article-meta">
            <a href="/posts/blog_nlp-intro_spacy/" class="article-date">
                <time datetime='2019-11-18T00:00:00.000&#43;00:00' itemprop="datePublished">2019-11-18</time>
            </a>
            
            
            <div class="post-categories">
                <div class="article-category">
                    
                    
                    <a class="article-category-link" href="https://imtorgdemo.github.io//categories/datascience">datascience</a>
                    
                    
                    <span>&gt;</span>
                    
                    <a class="article-category-link" href="https://imtorgdemo.github.io//categories/category2">category2</a>
                    
                </div>
            </div>
            
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            <p>Python is a typical language chosen for Data Science work, and its strengths with strings make it especially useful for working with natural language.  While the <code>nltk</code> library opened-up this work for python users, the newer <code>spacy</code> improves upon processing power by implementing Cython code.  Tests display its power in production when compared with more traditional approaches, such as with Stanford&rsquo;s CoreNLP.  This post is an outline of examples from the <a href="https://course.spacy.io/">spacy coursework</a> and <a href="https://spacy.io/usage/examples">examples</a>.  It also uses <code>nltk</code> for providing datasets.  Additional examples come from:</p>
<ul>
<li><a href="https://github.com/cytora/pycon-nlp-in-10-lines/blob/master/00_spacy_intro.ipynb">tutorials</a></li>
<li><a href="https://spacy.io/usage/spacy-101#whats-spacy">spacy usage documentation</a></li>
<li><a href="https://spacy.io/usage/linguistic-features">linguistic features</a></li>
<li><a href="https://spacy.io/api/top-level#displacy.serve">api documentation</a></li>
</ul>
<p>This tutorial introduces the basics of working with natural languages in python, including the following topics:</p>
<ul>
<li>Extract linguistic features: part-of-speech tags, dependencies, named entities</li>
<li>Work with pre-trained statistical models</li>
<li>Find words and phrases using Matcher and PhraseMatcher match rules</li>
<li>Best practices for working with data structures Doc, Token Span, Vocab, Lexeme</li>
<li>Find semantic similarities using word vectors</li>
<li>Write custom pipeline components with extension attributes</li>
</ul>
<h2 id="configure-environment">Configure Environment</h2>
<p>Ensure that spacy is installed.  Language models are also necessary:</p>
<pre tabindex="0"><code>\\( python -m spacy download en\_core\_web\_sm
#or, pip install https://github.com/explosion/spacy-models/releases/download/en\_core\_web\_sm-2.0.0/en\_core\_web\_sm-2.0.0.tar.gz --no-deps
\\) python -m spacy validate
$ python -m spacy download en_core_web_lg --force
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.lang.en <span style="color:#f92672">import</span> English
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> English()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> nltk
</span></span><span style="display:flex;"><span>print( nltk<span style="color:#f92672">.</span>corpus<span style="color:#f92672">.</span>gutenberg<span style="color:#f92672">.</span>fileids())
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>emma <span style="color:#f92672">=</span> nltk<span style="color:#f92672">.</span>corpus<span style="color:#f92672">.</span>gutenberg<span style="color:#f92672">.</span>raw(<span style="color:#e6db74">&#39;austen-emma.txt&#39;</span>)
</span></span><span style="display:flex;"><span>emma <span style="color:#f92672">=</span> emma<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>,<span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>docEmma <span style="color:#f92672">=</span> nlp(emma)
</span></span></code></pre></div><h2 id="finding-words-phrases-names-and-concepts">Finding words, phrases, names and concepts</h2>
<h3 id="documents-spans-and-tokens">Documents, spans, and tokens</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Process the text</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like tree kangaroos and narwhals.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Select the first token</span>
</span></span><span style="display:flex;"><span>first_token <span style="color:#f92672">=</span> doc[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Print the first token&#39;s text</span>
</span></span><span style="display:flex;"><span>print(first_token<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">I
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Process the text</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like tree kangaroos and narwhals.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># A slice of the Doc for &#34;tree kangaroos&#34;</span>
</span></span><span style="display:flex;"><span>tree_kangaroos <span style="color:#f92672">=</span> doc[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>print(tree_kangaroos<span style="color:#f92672">.</span>text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># A slice of the Doc for &#34;tree kangaroos and narwhals&#34; (without the &#34;.&#34;)</span>
</span></span><span style="display:flex;"><span>tree_kangaroos_and_narwhals <span style="color:#f92672">=</span> doc[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">6</span>]
</span></span><span style="display:flex;"><span>print(tree_kangaroos_and_narwhals<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">tree kangaroos
tree kangaroos and narwhals
</code></pre>

</div>

<h3 id="lexical-attributes">Lexical attributes</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Process the text</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;In 1990, more than 60</span><span style="color:#e6db74">% o</span><span style="color:#e6db74">f people in East Asia were in extreme poverty. &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Now less than 4</span><span style="color:#e6db74">% a</span><span style="color:#e6db74">re.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Iterate over the tokens in the doc</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> token <span style="color:#f92672">in</span> doc:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Check if the token resembles a number</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> token<span style="color:#f92672">.</span>like_num:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Get the next token in the document</span>
</span></span><span style="display:flex;"><span>        next_token <span style="color:#f92672">=</span> doc[token<span style="color:#f92672">.</span>i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Check if the next token&#39;s text equals &#39;%&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> next_token<span style="color:#f92672">.</span>text <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;%&#34;</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Percentage found:&#34;</span>, token<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">Percentage found: 60
Percentage found: 4
</code></pre>

</div>

<h3 id="context-specific-linguistic-attributes-using-models">Context-specific linguistic attributes (using models)</h3>
<p>The model provides the binary weights that enable spaCy to make predictions.  It also includes the vocabulary, and meta information to tell spaCy which language class to use and how to configure the processing pipeline.  All models include a <code>meta.json</code> that defines the language to initialize, the pipeline component names to load as well as general meta information like the model name, version, license, data sources, author and accuracy figures (if available).  Model packages include a <code>strings.json</code> that stores the entries in the model’s vocabulary and the mapping to hashes. This allows spaCy to only communicate in hashes and look up the corresponding string if needed.</p>
<p>The en_core_web_lg (788 MB) compared to en_core_web_sm (10 MB):</p>
<ul>
<li>LAS: 90.07% vs 89.66%</li>
<li>POS: 96.98% vs 96.78%</li>
<li>UAS: 91.83% vs 91.53%</li>
<li>NER F-score: 86.62% vs 85.86%</li>
<li>NER precision: 87.03% vs 86.33%</li>
<li>NER recall: 86.20% vs 85.39%</li>
</ul>
<p>All that while en_core_web_lg is 79 times larger, hence loads a lot more slowly.</p>
<p>In spaCy, attributes that return strings usually end with an underscore (<code>pos_</code>) – attributes without the underscore return an ID.</p>
<ul>
<li>The <code>dep_</code> attribute returns the predicted dependency label.</li>
<li>The <code>head</code> attribute returns the syntactic head token. You can also think of it as the parent token this word is attached to.</li>
<li>The <code>doc.ents</code> property lets you access the named entities predicted by the model.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#model package</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#$ python -m spacy download en_core_web_sm</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#load models</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_sm&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;She ate the pizza&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#iterate over the tokens</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> token <span style="color:#f92672">in</span> doc:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#print the text and the predicted part-of-speech tag</span>
</span></span><span style="display:flex;"><span>    print(token<span style="color:#f92672">.</span>i, token<span style="color:#f92672">.</span>text, token<span style="color:#f92672">.</span>pos_)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">0 She PRON
1 ate VERB
2 the DET
3 pizza NOUN
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#syntatic dependency</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> token <span style="color:#f92672">in</span> doc:
</span></span><span style="display:flex;"><span>    print(token<span style="color:#f92672">.</span>text, token<span style="color:#f92672">.</span>pos_, token<span style="color:#f92672">.</span>dep_, token<span style="color:#f92672">.</span>head<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">She PRON nsubj ate
ate VERB ROOT ate
the DET det pizza
pizza NOUN dobj ate
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#process a text</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">u</span><span style="color:#e6db74">&#34;Apple is looking at buying U.K. startup for $1 billion&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Iterate over the predicted entities</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> ent <span style="color:#f92672">in</span> doc<span style="color:#f92672">.</span>ents:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Print the entity text and its label</span>
</span></span><span style="display:flex;"><span>    print(ent<span style="color:#f92672">.</span>text, ent<span style="color:#f92672">.</span>label_)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">Apple ORG
U.K. GPE
$1 billion MONEY
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> tok <span style="color:#f92672">in</span> doc:
</span></span><span style="display:flex;"><span>    print( tok<span style="color:#f92672">.</span>text, tok<span style="color:#f92672">.</span>ent_type_, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">Apple ORG is  looking  at  buying  U.K. GPE startup  for  $ MONEY 1 MONEY billion MONEY 
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#common tags and labels</span>
</span></span><span style="display:flex;"><span>print( spacy<span style="color:#f92672">.</span>explain(<span style="color:#e6db74">&#39;GPE&#39;</span>) )
</span></span><span style="display:flex;"><span>print( spacy<span style="color:#f92672">.</span>explain(<span style="color:#e6db74">&#39;NNP&#39;</span>) )
</span></span><span style="display:flex;"><span>print( spacy<span style="color:#f92672">.</span>explain(<span style="color:#e6db74">&#39;dobj&#39;</span>) )
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">Countries, cities, states
noun, proper singular
direct object
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy <span style="color:#f92672">import</span> displacy
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;This is a sentence.&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;This is another sentence.&#34;</span>)
</span></span><span style="display:flex;"><span>displacy<span style="color:#f92672">.</span>render([doc1, doc2], style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dep&#34;</span>)
</span></span></code></pre></div><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="98185150183a41159336f6bbe30e0f1c-0" class="displacy" width="750" height="312.0" direction="ltr" style="max-width: none; height: 312.0px; color: #000000; background: #ffffff; font-family: Arial; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="50">This</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="225">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="225">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="400">a</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="400">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="575">sentence.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="575">NOUN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-98185150183a41159336f6bbe30e0f1c-0-0" stroke-width="2px" d="M70,177.0 C70,89.5 220.0,89.5 220.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-98185150183a41159336f6bbe30e0f1c-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M70,179.0 L62,167.0 78,167.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-98185150183a41159336f6bbe30e0f1c-0-1" stroke-width="2px" d="M420,177.0 C420,89.5 570.0,89.5 570.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-98185150183a41159336f6bbe30e0f1c-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M420,179.0 L412,167.0 428,167.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-98185150183a41159336f6bbe30e0f1c-0-2" stroke-width="2px" d="M245,177.0 C245,2.0 575.0,2.0 575.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-98185150183a41159336f6bbe30e0f1c-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">attr</textPath>
    </text>
    <path class="displacy-arrowhead" d="M575.0,179.0 L583.0,167.0 567.0,167.0" fill="currentColor"/>
</g>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="98185150183a41159336f6bbe30e0f1c-1" class="displacy" width="750" height="312.0" direction="ltr" style="max-width: none; height: 312.0px; color: #000000; background: #ffffff; font-family: Arial; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="50">This</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="225">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="225">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="400">another</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="400">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="575">sentence.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="575">NOUN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-98185150183a41159336f6bbe30e0f1c-1-0" stroke-width="2px" d="M70,177.0 C70,89.5 220.0,89.5 220.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-98185150183a41159336f6bbe30e0f1c-1-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M70,179.0 L62,167.0 78,167.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-98185150183a41159336f6bbe30e0f1c-1-1" stroke-width="2px" d="M420,177.0 C420,89.5 570.0,89.5 570.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-98185150183a41159336f6bbe30e0f1c-1-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M420,179.0 L412,167.0 428,167.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-98185150183a41159336f6bbe30e0f1c-1-2" stroke-width="2px" d="M245,177.0 C245,2.0 575.0,2.0 575.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-98185150183a41159336f6bbe30e0f1c-1-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">attr</textPath>
    </text>
    <path class="displacy-arrowhead" d="M575.0,179.0 L583.0,167.0 567.0,167.0" fill="currentColor"/>
</g>
</svg>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy <span style="color:#f92672">import</span> displacy
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>options <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;compact&#34;</span>: <span style="color:#66d9ef">True</span>, <span style="color:#e6db74">&#34;bg&#34;</span>: <span style="color:#e6db74">&#34;#09a3d5&#34;</span>,<span style="color:#e6db74">&#34;color&#34;</span>: <span style="color:#e6db74">&#34;white&#34;</span>, <span style="color:#e6db74">&#34;font&#34;</span>: <span style="color:#e6db74">&#34;Source Sans Pro&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;In ancient Rome, some neighbors live in three adjacent houses. In the center is the house of Senex, who lives there with wife Domina, son Hero, and several slaves, including head slave Hysterium and the musical&#39;s main character Pseudolus.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(text)
</span></span><span style="display:flex;"><span>sentence_spans <span style="color:#f92672">=</span> list(doc<span style="color:#f92672">.</span>sents)
</span></span><span style="display:flex;"><span>displacy<span style="color:#f92672">.</span>render(sentence_spans, style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dep&#34;</span>, options<span style="color:#f92672">=</span>options, jupyter<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="c2baa64957a84bfb9ce5180baa2e949c-0" class="displacy" width="1550" height="437.0" direction="ltr" style="max-width: none; height: 437.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="50">In</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="200">ancient</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="350">Rome,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="500">some</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="650">neighbors</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="800">live</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="950">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">three</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">NUM</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">adjacent</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">houses.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">NOUN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-0" stroke-width="2px" d="M62,302.0 62,202.0 800.0,202.0 800.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,304.0 L58,296.0 66,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-1" stroke-width="2px" d="M212,302.0 212,277.0 341.0,277.0 341.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M212,304.0 L208,296.0 216,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-2" stroke-width="2px" d="M62,302.0 62,252.0 344.0,252.0 344.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M344.0,304.0 L348.0,296.0 340.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-3" stroke-width="2px" d="M512,302.0 512,277.0 641.0,277.0 641.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M512,304.0 L508,296.0 516,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-4" stroke-width="2px" d="M662,302.0 662,277.0 791.0,277.0 791.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M662,304.0 L658,296.0 666,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-5" stroke-width="2px" d="M812,302.0 812,277.0 941.0,277.0 941.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M941.0,304.0 L945.0,296.0 937.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-6" stroke-width="2px" d="M1112,302.0 1112,252.0 1394.0,252.0 1394.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nummod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1112,304.0 L1108,296.0 1116,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-7" stroke-width="2px" d="M1262,302.0 1262,277.0 1391.0,277.0 1391.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1262,304.0 L1258,296.0 1266,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-0-8" stroke-width="2px" d="M962,302.0 962,227.0 1397.0,227.0 1397.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-0-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1397.0,304.0 L1401.0,296.0 1393.0,296.0" fill="currentColor"/>
</g>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="c2baa64957a84bfb9ce5180baa2e949c-1" class="displacy" width="4550" height="437.0" direction="ltr" style="max-width: none; height: 437.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="50">In</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="200">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="350">center</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="500">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="650">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="800">house</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="950">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">Senex,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">who</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">PRON</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">lives</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1550">there</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1550">ADV</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1700">with</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1700">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="1850">wife</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1850">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2000">Domina,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2000">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2150">son</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2150">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2300">Hero,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2300">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2450">and</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2450">CCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2600">several</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2600">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2750">slaves,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2750">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="2900">including</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2900">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3050">head</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3050">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3200">slave</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3200">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3350">Hysterium</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3350">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3500">and</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3500">CCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3650">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3650">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3800">musical</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3800">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="3950">'s</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3950">PART</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="4100">main</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4100">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="4250">character</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4250">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="4400">Pseudolus.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4400">PROPN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-0" stroke-width="2px" d="M62,302.0 62,227.0 497.0,227.0 497.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,304.0 L58,296.0 66,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-1" stroke-width="2px" d="M212,302.0 212,277.0 341.0,277.0 341.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M212,304.0 L208,296.0 216,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-2" stroke-width="2px" d="M62,302.0 62,252.0 344.0,252.0 344.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M344.0,304.0 L348.0,296.0 340.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-3" stroke-width="2px" d="M662,302.0 662,277.0 791.0,277.0 791.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M662,304.0 L658,296.0 666,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-4" stroke-width="2px" d="M512,302.0 512,252.0 794.0,252.0 794.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M794.0,304.0 L798.0,296.0 790.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-5" stroke-width="2px" d="M812,302.0 812,277.0 941.0,277.0 941.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M941.0,304.0 L945.0,296.0 937.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-6" stroke-width="2px" d="M962,302.0 962,277.0 1091.0,277.0 1091.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1091.0,304.0 L1095.0,296.0 1087.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-7" stroke-width="2px" d="M1262,302.0 1262,277.0 1391.0,277.0 1391.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1262,304.0 L1258,296.0 1266,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-8" stroke-width="2px" d="M1112,302.0 1112,252.0 1394.0,252.0 1394.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">relcl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1394.0,304.0 L1398.0,296.0 1390.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-9" stroke-width="2px" d="M1412,302.0 1412,277.0 1541.0,277.0 1541.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-9" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1541.0,304.0 L1545.0,296.0 1537.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-10" stroke-width="2px" d="M1412,302.0 1412,252.0 1694.0,252.0 1694.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-10" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1694.0,304.0 L1698.0,296.0 1690.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-11" stroke-width="2px" d="M1712,302.0 1712,277.0 1841.0,277.0 1841.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-11" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1841.0,304.0 L1845.0,296.0 1837.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-12" stroke-width="2px" d="M1862,302.0 1862,277.0 1991.0,277.0 1991.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-12" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">appos</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1991.0,304.0 L1995.0,296.0 1987.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-13" stroke-width="2px" d="M2162,302.0 2162,277.0 2291.0,277.0 2291.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-13" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">compound</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2162,304.0 L2158,296.0 2166,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-14" stroke-width="2px" d="M2012,302.0 2012,252.0 2294.0,252.0 2294.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-14" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2294.0,304.0 L2298.0,296.0 2290.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-15" stroke-width="2px" d="M2312,302.0 2312,277.0 2441.0,277.0 2441.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-15" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cc</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2441.0,304.0 L2445.0,296.0 2437.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-16" stroke-width="2px" d="M2612,302.0 2612,277.0 2741.0,277.0 2741.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-16" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2612,304.0 L2608,296.0 2616,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-17" stroke-width="2px" d="M2312,302.0 2312,227.0 2747.0,227.0 2747.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-17" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2747.0,304.0 L2751.0,296.0 2743.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-18" stroke-width="2px" d="M2762,302.0 2762,277.0 2891.0,277.0 2891.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-18" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2891.0,304.0 L2895.0,296.0 2887.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-19" stroke-width="2px" d="M3062,302.0 3062,252.0 3344.0,252.0 3344.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-19" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">compound</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3062,304.0 L3058,296.0 3066,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-20" stroke-width="2px" d="M3212,302.0 3212,277.0 3341.0,277.0 3341.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-20" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">compound</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3212,304.0 L3208,296.0 3216,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-21" stroke-width="2px" d="M2912,302.0 2912,227.0 3347.0,227.0 3347.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-21" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3347.0,304.0 L3351.0,296.0 3343.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-22" stroke-width="2px" d="M3362,302.0 3362,277.0 3491.0,277.0 3491.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-22" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cc</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3491.0,304.0 L3495.0,296.0 3487.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-23" stroke-width="2px" d="M3662,302.0 3662,277.0 3791.0,277.0 3791.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-23" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3662,304.0 L3658,296.0 3666,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-24" stroke-width="2px" d="M3812,302.0 3812,227.0 4247.0,227.0 4247.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-24" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">poss</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3812,304.0 L3808,296.0 3816,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-25" stroke-width="2px" d="M3812,302.0 3812,277.0 3941.0,277.0 3941.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-25" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">case</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3941.0,304.0 L3945.0,296.0 3937.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-26" stroke-width="2px" d="M4112,302.0 4112,277.0 4241.0,277.0 4241.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-26" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4112,304.0 L4108,296.0 4116,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-27" stroke-width="2px" d="M3362,302.0 3362,202.0 4250.0,202.0 4250.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-27" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4250.0,304.0 L4254.0,296.0 4246.0,296.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-1-28" stroke-width="2px" d="M4262,302.0 4262,277.0 4391.0,277.0 4391.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-1-28" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">appos</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4391.0,304.0 L4395.0,296.0 4387.0,296.0" fill="currentColor"/>
</g>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="c2baa64957a84bfb9ce5180baa2e949c-2" class="displacy" width="2150" height="362.0" direction="ltr" style="max-width: none; height: 362.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="50">A</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="200">slave</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="350">belonging</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="500">to</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="650">Hero,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="800">Pseudolus</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="950">wishes</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">to</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">PART</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">buy,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">win,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="1550">or</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1550">CCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="1700">steal</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1700">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="1850">his</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1850">PRON</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="272.0">
    <tspan class="displacy-word" fill="currentColor" x="2000">freedom.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2000">NOUN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-0" stroke-width="2px" d="M62,227.0 62,202.0 194.0,202.0 194.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,229.0 L58,221.0 66,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-1" stroke-width="2px" d="M212,227.0 212,152.0 950.0,152.0 950.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">npadvmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M212,229.0 L208,221.0 216,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-2" stroke-width="2px" d="M212,227.0 212,202.0 344.0,202.0 344.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">acl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M344.0,229.0 L348.0,221.0 340.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-3" stroke-width="2px" d="M362,227.0 362,202.0 494.0,202.0 494.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M494.0,229.0 L498.0,221.0 490.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-4" stroke-width="2px" d="M512,227.0 512,202.0 644.0,202.0 644.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M644.0,229.0 L648.0,221.0 640.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-5" stroke-width="2px" d="M812,227.0 812,202.0 944.0,202.0 944.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M812,229.0 L808,221.0 816,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-6" stroke-width="2px" d="M1112,227.0 1112,202.0 1244.0,202.0 1244.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">aux</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1112,229.0 L1108,221.0 1116,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-7" stroke-width="2px" d="M962,227.0 962,177.0 1247.0,177.0 1247.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">xcomp</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1247.0,229.0 L1251.0,221.0 1243.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-8" stroke-width="2px" d="M1262,227.0 1262,202.0 1394.0,202.0 1394.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1394.0,229.0 L1398.0,221.0 1390.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-9" stroke-width="2px" d="M1412,227.0 1412,202.0 1544.0,202.0 1544.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-9" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cc</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1544.0,229.0 L1548.0,221.0 1540.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-10" stroke-width="2px" d="M1412,227.0 1412,177.0 1697.0,177.0 1697.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-10" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1697.0,229.0 L1701.0,221.0 1693.0,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-11" stroke-width="2px" d="M1862,227.0 1862,202.0 1994.0,202.0 1994.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-11" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">poss</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1862,229.0 L1858,221.0 1866,221.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-2-12" stroke-width="2px" d="M1712,227.0 1712,177.0 1997.0,177.0 1997.0,227.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-2-12" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">dobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1997.0,229.0 L2001.0,221.0 1993.0,221.0" fill="currentColor"/>
</g>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="c2baa64957a84bfb9ce5180baa2e949c-3" class="displacy" width="6050" height="587.0" direction="ltr" style="max-width: none; height: 587.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="50">One</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">NUM</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="200">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="350">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="500">neighboring</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="650">houses</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="800">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="950">owned</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">by</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">Marcus</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">Lycus,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="1550">who</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1550">PRON</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="1700">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1700">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="1850">a</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1850">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2000">buyer</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2000">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2150">and</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2150">CCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2300">seller</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2300">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2450">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2450">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2600">beautiful</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2600">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2750">women;</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2750">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="2900">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2900">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3050">other</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3050">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3200">belongs</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3200">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3350">to</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3350">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3500">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3500">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3650">ancient</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3650">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3800">Erronius,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3800">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="3950">who</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3950">PRON</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="4100">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4100">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="4250">abroad</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4250">ADV</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="4400">searching</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4400">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="4550">for</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4550">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="4700">his</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4700">PRON</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="4850">long-</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4850">ADV</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5000">lost</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5000">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5150">children (</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5150">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5300">stolen</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5300">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5450">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5450">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5600">infancy</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5600">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5750">by</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5750">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="497.0">
    <tspan class="displacy-word" fill="currentColor" x="5900">pirates).</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="5900">NOUN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-0" stroke-width="2px" d="M62,452.0 62,327.0 947.0,327.0 947.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubjpass</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,454.0 L58,446.0 66,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-1" stroke-width="2px" d="M62,452.0 62,427.0 185.0,427.0 185.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M185.0,454.0 L189.0,446.0 181.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-2" stroke-width="2px" d="M362,452.0 362,402.0 638.0,402.0 638.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M362,454.0 L358,446.0 366,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-3" stroke-width="2px" d="M512,452.0 512,427.0 635.0,427.0 635.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M512,454.0 L508,446.0 516,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-4" stroke-width="2px" d="M212,452.0 212,377.0 641.0,377.0 641.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M641.0,454.0 L645.0,446.0 637.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-5" stroke-width="2px" d="M812,452.0 812,427.0 935.0,427.0 935.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">auxpass</textPath>
    </text>
    <path class="displacy-arrowhead" d="M812,454.0 L808,446.0 816,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-6" stroke-width="2px" d="M962,452.0 962,302.0 3200.0,302.0 3200.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">ccomp</textPath>
    </text>
    <path class="displacy-arrowhead" d="M962,454.0 L958,446.0 966,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-7" stroke-width="2px" d="M962,452.0 962,427.0 1085.0,427.0 1085.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">agent</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1085.0,454.0 L1089.0,446.0 1081.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-8" stroke-width="2px" d="M1262,452.0 1262,427.0 1385.0,427.0 1385.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">compound</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1262,454.0 L1258,446.0 1266,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-9" stroke-width="2px" d="M1112,452.0 1112,402.0 1388.0,402.0 1388.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-9" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1388.0,454.0 L1392.0,446.0 1384.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-10" stroke-width="2px" d="M1562,452.0 1562,427.0 1685.0,427.0 1685.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-10" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1562,454.0 L1558,446.0 1566,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-11" stroke-width="2px" d="M1412,452.0 1412,402.0 1688.0,402.0 1688.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-11" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">relcl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1688.0,454.0 L1692.0,446.0 1684.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-12" stroke-width="2px" d="M1862,452.0 1862,427.0 1985.0,427.0 1985.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-12" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1862,454.0 L1858,446.0 1866,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-13" stroke-width="2px" d="M1712,452.0 1712,402.0 1988.0,402.0 1988.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-13" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">attr</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1988.0,454.0 L1992.0,446.0 1984.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-14" stroke-width="2px" d="M2012,452.0 2012,427.0 2135.0,427.0 2135.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-14" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cc</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2135.0,454.0 L2139.0,446.0 2131.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-15" stroke-width="2px" d="M2012,452.0 2012,402.0 2288.0,402.0 2288.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-15" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2288.0,454.0 L2292.0,446.0 2284.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-16" stroke-width="2px" d="M2012,452.0 2012,377.0 2441.0,377.0 2441.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-16" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2441.0,454.0 L2445.0,446.0 2437.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-17" stroke-width="2px" d="M2612,452.0 2612,427.0 2735.0,427.0 2735.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-17" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2612,454.0 L2608,446.0 2616,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-18" stroke-width="2px" d="M2462,452.0 2462,402.0 2738.0,402.0 2738.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-18" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2738.0,454.0 L2742.0,446.0 2734.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-19" stroke-width="2px" d="M2912,452.0 2912,427.0 3035.0,427.0 3035.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-19" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2912,454.0 L2908,446.0 2916,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-20" stroke-width="2px" d="M3062,452.0 3062,427.0 3185.0,427.0 3185.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-20" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3062,454.0 L3058,446.0 3066,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-21" stroke-width="2px" d="M3212,452.0 3212,427.0 3335.0,427.0 3335.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-21" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3335.0,454.0 L3339.0,446.0 3331.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-22" stroke-width="2px" d="M3512,452.0 3512,402.0 3788.0,402.0 3788.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-22" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3512,454.0 L3508,446.0 3516,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-23" stroke-width="2px" d="M3662,452.0 3662,427.0 3785.0,427.0 3785.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-23" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3662,454.0 L3658,446.0 3666,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-24" stroke-width="2px" d="M3362,452.0 3362,377.0 3791.0,377.0 3791.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-24" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3791.0,454.0 L3795.0,446.0 3787.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-25" stroke-width="2px" d="M3962,452.0 3962,427.0 4085.0,427.0 4085.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-25" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3962,454.0 L3958,446.0 3966,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-26" stroke-width="2px" d="M3812,452.0 3812,402.0 4088.0,402.0 4088.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-26" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">relcl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4088.0,454.0 L4092.0,446.0 4084.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-27" stroke-width="2px" d="M4112,452.0 4112,427.0 4235.0,427.0 4235.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-27" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4235.0,454.0 L4239.0,446.0 4231.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-28" stroke-width="2px" d="M4112,452.0 4112,402.0 4388.0,402.0 4388.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-28" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advcl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4388.0,454.0 L4392.0,446.0 4384.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-29" stroke-width="2px" d="M4412,452.0 4412,427.0 4535.0,427.0 4535.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-29" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4535.0,454.0 L4539.0,446.0 4531.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-30" stroke-width="2px" d="M4712,452.0 4712,377.0 5141.0,377.0 5141.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-30" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">poss</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4712,454.0 L4708,446.0 4716,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-31" stroke-width="2px" d="M4862,452.0 4862,427.0 4985.0,427.0 4985.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-31" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4862,454.0 L4858,446.0 4866,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-32" stroke-width="2px" d="M5012,452.0 5012,427.0 5135.0,427.0 5135.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-32" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5012,454.0 L5008,446.0 5016,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-33" stroke-width="2px" d="M4562,452.0 4562,352.0 5144.0,352.0 5144.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-33" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5144.0,454.0 L5148.0,446.0 5140.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-34" stroke-width="2px" d="M5162,452.0 5162,427.0 5285.0,427.0 5285.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-34" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">acl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5285.0,454.0 L5289.0,446.0 5281.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-35" stroke-width="2px" d="M5312,452.0 5312,427.0 5435.0,427.0 5435.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-35" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5435.0,454.0 L5439.0,446.0 5431.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-36" stroke-width="2px" d="M5462,452.0 5462,427.0 5585.0,427.0 5585.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-36" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5585.0,454.0 L5589.0,446.0 5581.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-37" stroke-width="2px" d="M5312,452.0 5312,377.0 5741.0,377.0 5741.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-37" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">agent</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5741.0,454.0 L5745.0,446.0 5737.0,446.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-3-38" stroke-width="2px" d="M5762,452.0 5762,427.0 5885.0,427.0 5885.0,452.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-3-38" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M5885.0,454.0 L5889.0,446.0 5881.0,446.0" fill="currentColor"/>
</g>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="c2baa64957a84bfb9ce5180baa2e949c-4" class="displacy" width="2450" height="512.0" direction="ltr" style="max-width: none; height: 512.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="50">One</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">NUM</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="200">day,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="350">Senex</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="500">and</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">CCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="650">Domina</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="800">go</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="950">on</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">a</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">trip</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">and</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">CCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1550">leave</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1550">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1700">Pseudolus</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1700">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1850">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1850">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2000">charge</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2000">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2150">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2150">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2300">Hero.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2300">PROPN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-0" stroke-width="2px" d="M62,377.0 62,352.0 188.0,352.0 188.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nummod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,379.0 L58,371.0 66,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-1" stroke-width="2px" d="M212,377.0 212,277.0 797.0,277.0 797.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">npadvmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M212,379.0 L208,371.0 216,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-2" stroke-width="2px" d="M362,377.0 362,302.0 794.0,302.0 794.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M362,379.0 L358,371.0 366,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-3" stroke-width="2px" d="M362,377.0 362,352.0 488.0,352.0 488.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cc</textPath>
    </text>
    <path class="displacy-arrowhead" d="M488.0,379.0 L492.0,371.0 484.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-4" stroke-width="2px" d="M362,377.0 362,327.0 641.0,327.0 641.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M641.0,379.0 L645.0,371.0 637.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-5" stroke-width="2px" d="M812,377.0 812,352.0 938.0,352.0 938.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M938.0,379.0 L942.0,371.0 934.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-6" stroke-width="2px" d="M1112,377.0 1112,352.0 1238.0,352.0 1238.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1112,379.0 L1108,371.0 1116,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-7" stroke-width="2px" d="M962,377.0 962,327.0 1241.0,327.0 1241.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1241.0,379.0 L1245.0,371.0 1237.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-8" stroke-width="2px" d="M812,377.0 812,277.0 1397.0,277.0 1397.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cc</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1397.0,379.0 L1401.0,371.0 1393.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-9" stroke-width="2px" d="M812,377.0 812,252.0 1550.0,252.0 1550.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-9" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">conj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1550.0,379.0 L1554.0,371.0 1546.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-10" stroke-width="2px" d="M1562,377.0 1562,352.0 1688.0,352.0 1688.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-10" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">dobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1688.0,379.0 L1692.0,371.0 1684.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-11" stroke-width="2px" d="M1562,377.0 1562,327.0 1841.0,327.0 1841.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-11" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1841.0,379.0 L1845.0,371.0 1837.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-12" stroke-width="2px" d="M1862,377.0 1862,352.0 1988.0,352.0 1988.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-12" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1988.0,379.0 L1992.0,371.0 1984.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-13" stroke-width="2px" d="M2012,377.0 2012,352.0 2138.0,352.0 2138.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-13" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2138.0,379.0 L2142.0,371.0 2134.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-4-14" stroke-width="2px" d="M2162,377.0 2162,352.0 2288.0,352.0 2288.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-4-14" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2288.0,379.0 L2292.0,371.0 2284.0,371.0" fill="currentColor"/>
</g>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="c2baa64957a84bfb9ce5180baa2e949c-5" class="displacy" width="3950" height="512.0" direction="ltr" style="max-width: none; height: 512.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="50">Hero</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="200">confides</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">VERB</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="350">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="500">Pseudolus</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="650">that</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">SCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="800">he</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">PRON</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="950">is</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">AUX</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">love</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">with</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1550">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1550">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1700">lovely</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1700">ADJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="1850">Philia,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1850">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2000">one</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2000">NUM</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2150">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2150">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2300">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2300">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2450">courtesans</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2450">NOUN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2600">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2600">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2750">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2750">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="2900">House</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2900">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="3050">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3050">ADP</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="3200">Lycus (</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3200">PROPN</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="3350">albeit</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3350">SCONJ</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="3500">still</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3500">ADV</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="3650">a</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3650">DET</tspan>
</text>
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="422.0">
    <tspan class="displacy-word" fill="currentColor" x="3800">virgin).</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3800">NOUN</tspan>
</text>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-0" stroke-width="2px" d="M62,377.0 62,352.0 188.0,352.0 188.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,379.0 L58,371.0 66,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-1" stroke-width="2px" d="M212,377.0 212,352.0 338.0,352.0 338.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M338.0,379.0 L342.0,371.0 334.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-2" stroke-width="2px" d="M362,377.0 362,352.0 488.0,352.0 488.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M488.0,379.0 L492.0,371.0 484.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-3" stroke-width="2px" d="M662,377.0 662,327.0 941.0,327.0 941.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">mark</textPath>
    </text>
    <path class="displacy-arrowhead" d="M662,379.0 L658,371.0 666,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-4" stroke-width="2px" d="M812,377.0 812,352.0 938.0,352.0 938.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M812,379.0 L808,371.0 816,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-5" stroke-width="2px" d="M212,377.0 212,277.0 947.0,277.0 947.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">ccomp</textPath>
    </text>
    <path class="displacy-arrowhead" d="M947.0,379.0 L951.0,371.0 943.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-6" stroke-width="2px" d="M962,377.0 962,352.0 1088.0,352.0 1088.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1088.0,379.0 L1092.0,371.0 1084.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-7" stroke-width="2px" d="M1112,377.0 1112,352.0 1238.0,352.0 1238.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1238.0,379.0 L1242.0,371.0 1234.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-8" stroke-width="2px" d="M1262,377.0 1262,352.0 1388.0,352.0 1388.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1388.0,379.0 L1392.0,371.0 1384.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-9" stroke-width="2px" d="M1562,377.0 1562,327.0 1841.0,327.0 1841.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-9" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1562,379.0 L1558,371.0 1566,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-10" stroke-width="2px" d="M1712,377.0 1712,352.0 1838.0,352.0 1838.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-10" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1712,379.0 L1708,371.0 1716,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-11" stroke-width="2px" d="M1412,377.0 1412,302.0 1844.0,302.0 1844.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-11" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1844.0,379.0 L1848.0,371.0 1840.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-12" stroke-width="2px" d="M1862,377.0 1862,352.0 1988.0,352.0 1988.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-12" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">appos</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1988.0,379.0 L1992.0,371.0 1984.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-13" stroke-width="2px" d="M2012,377.0 2012,352.0 2138.0,352.0 2138.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-13" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2138.0,379.0 L2142.0,371.0 2134.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-14" stroke-width="2px" d="M2312,377.0 2312,352.0 2438.0,352.0 2438.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-14" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2312,379.0 L2308,371.0 2316,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-15" stroke-width="2px" d="M2162,377.0 2162,327.0 2441.0,327.0 2441.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-15" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2441.0,379.0 L2445.0,371.0 2437.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-16" stroke-width="2px" d="M2462,377.0 2462,352.0 2588.0,352.0 2588.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-16" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2588.0,379.0 L2592.0,371.0 2584.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-17" stroke-width="2px" d="M2762,377.0 2762,352.0 2888.0,352.0 2888.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-17" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2762,379.0 L2758,371.0 2766,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-18" stroke-width="2px" d="M2612,377.0 2612,327.0 2891.0,327.0 2891.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-18" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2891.0,379.0 L2895.0,371.0 2887.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-19" stroke-width="2px" d="M2912,377.0 2912,352.0 3038.0,352.0 3038.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-19" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3038.0,379.0 L3042.0,371.0 3034.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-20" stroke-width="2px" d="M3062,377.0 3062,352.0 3188.0,352.0 3188.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-20" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3188.0,379.0 L3192.0,371.0 3184.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-21" stroke-width="2px" d="M962,377.0 962,252.0 3350.0,252.0 3350.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-21" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3350.0,379.0 L3354.0,371.0 3346.0,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-22" stroke-width="2px" d="M3512,377.0 3512,327.0 3791.0,327.0 3791.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-22" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3512,379.0 L3508,371.0 3516,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-23" stroke-width="2px" d="M3662,377.0 3662,352.0 3788.0,352.0 3788.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-23" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3662,379.0 L3658,371.0 3666,371.0" fill="currentColor"/>
</g>
<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c2baa64957a84bfb9ce5180baa2e949c-5-24" stroke-width="2px" d="M3362,377.0 3362,302.0 3794.0,302.0 3794.0,377.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c2baa64957a84bfb9ce5180baa2e949c-5-24" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3794.0,379.0 L3798.0,371.0 3790.0,371.0" fill="currentColor"/>
</g>
</svg>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy <span style="color:#f92672">import</span> displacy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;When Sebastian Thrun started working on self-driving cars at Google in 2007, few people outside of the company took him seriously.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(text)
</span></span><span style="display:flex;"><span>displacy<span style="color:#f92672">.</span>render(doc, style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ent&#34;</span>)
</span></span></code></pre></div><div class="entities" style="line-height: 2.5; direction: ltr">When 
<mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Sebastian Thrun
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; text-transform: uppercase; vertical-align: middle; margin-left: 0.5rem">PERSON</span>
</mark>
 started working on self-driving cars at 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Google
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; text-transform: uppercase; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 in 
<mark class="entity" style="background: #bfe1d9; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    2007
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; text-transform: uppercase; vertical-align: middle; margin-left: 0.5rem">DATE</span>
</mark>
, few people outside of the company took him seriously.</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>colors <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;ORG&#34;</span>: <span style="color:#e6db74">&#34;linear-gradient(90deg, #aa9cfc, #fc9ce7)&#34;</span>}
</span></span><span style="display:flex;"><span>options <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;ents&#34;</span>: [<span style="color:#e6db74">&#34;ORG&#34;</span>], <span style="color:#e6db74">&#34;colors&#34;</span>: colors}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>displacy<span style="color:#f92672">.</span>render(doc, style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ent&#34;</span>, options<span style="color:#f92672">=</span>options)
</span></span></code></pre></div><div class="entities" style="line-height: 2.5; direction: ltr">When Sebastian Thrun started working on self-driving cars at 
<mark class="entity" style="background: linear-gradient(90deg, #aa9cfc, #fc9ce7); padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Google
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; text-transform: uppercase; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 in 2007, few people outside of the company took him seriously.</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;words&#34;</span>: [
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;This&#34;</span>, <span style="color:#e6db74">&#34;tag&#34;</span>: <span style="color:#e6db74">&#34;DT&#34;</span>},
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;is&#34;</span>, <span style="color:#e6db74">&#34;tag&#34;</span>: <span style="color:#e6db74">&#34;VBZ&#34;</span>},
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;tag&#34;</span>: <span style="color:#e6db74">&#34;DT&#34;</span>},
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;sentence&#34;</span>, <span style="color:#e6db74">&#34;tag&#34;</span>: <span style="color:#e6db74">&#34;NN&#34;</span>}
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;arcs&#34;</span>: [
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;start&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;end&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;nsubj&#34;</span>, <span style="color:#e6db74">&#34;dir&#34;</span>: <span style="color:#e6db74">&#34;left&#34;</span>},
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;start&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;end&#34;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;det&#34;</span>, <span style="color:#e6db74">&#34;dir&#34;</span>: <span style="color:#e6db74">&#34;left&#34;</span>},
</span></span><span style="display:flex;"><span>        {<span style="color:#e6db74">&#34;start&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;end&#34;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;attr&#34;</span>, <span style="color:#e6db74">&#34;dir&#34;</span>: <span style="color:#e6db74">&#34;right&#34;</span>}
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ex <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;But Google is starting from behind.&#34;</span>,
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#34;ents&#34;</span>: [{<span style="color:#e6db74">&#34;start&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#34;end&#34;</span>: <span style="color:#ae81ff">10</span>, <span style="color:#e6db74">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;ORG&#34;</span>}],
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#34;title&#34;</span>: <span style="color:#66d9ef">None</span>}]
</span></span><span style="display:flex;"><span>html <span style="color:#f92672">=</span> displacy<span style="color:#f92672">.</span>render(ex, style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ent&#34;</span>, manual<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><div class="entities" style="line-height: 2.5; direction: ltr">But 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Google
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; text-transform: uppercase; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 is starting from behind.</div>
<h3 id="rule-based-matching">Rule-based matching</h3>
<ul>
<li>Match exact token texts: <code>[{'TEXT': 'iPhone'}, {'TEXT': 'X'}]</code></li>
<li>Match lexical attributes: <code>[{'LOWER': 'iphone'}, {'LOWER': 'x'}]</code></li>
<li>Match any token attributes: <code>[{'LEMMA': 'buy'}, {'POS': 'NOUN'}]</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Import the Matcher</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.matcher <span style="color:#f92672">import</span> Matcher
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;New iPhone X release date leaked as Apple reveals pre-orders by mistake&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize the matcher with the shared vocab</span>
</span></span><span style="display:flex;"><span>matcher <span style="color:#f92672">=</span> Matcher(nlp<span style="color:#f92672">.</span>vocab)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add the pattern to the matcher</span>
</span></span><span style="display:flex;"><span>pattern <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#39;TEXT&#39;</span>: <span style="color:#e6db74">&#39;iPhone&#39;</span>}, {<span style="color:#e6db74">&#39;TEXT&#39;</span>: <span style="color:#e6db74">&#39;X&#39;</span>}]
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;IPHONE_PATTERN&#39;</span>, <span style="color:#66d9ef">None</span>, pattern)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Process some text</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;New iPhone X release date leaked&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call the matcher on the doc</span>
</span></span><span style="display:flex;"><span>matches <span style="color:#f92672">=</span> matcher(doc)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#match_id: hash value of the pattern name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#start: start index of matched span</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end: end index of matched span</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Iterate over the matches</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> match_id, start, end <span style="color:#f92672">in</span> matches:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Get the matched span</span>
</span></span><span style="display:flex;"><span>    matched_span <span style="color:#f92672">=</span> doc[start:end]
</span></span><span style="display:flex;"><span>    print(matched_span<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">[(9528407286733565721, 1, 3)]
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Write a pattern that matches a form of &#34;download&#34; plus proper noun</span>
</span></span><span style="display:flex;"><span>pattern <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LEMMA&#34;</span>: <span style="color:#e6db74">&#34;download&#34;</span>}, {<span style="color:#e6db74">&#34;POS&#34;</span>: <span style="color:#e6db74">&#34;PROPN&#34;</span>}]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Write a pattern for adjective plus one or two nouns</span>
</span></span><span style="display:flex;"><span>pattern <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;POS&#34;</span>: ____}, {<span style="color:#e6db74">&#34;POS&#34;</span>: ____}, {<span style="color:#e6db74">&#34;POS&#34;</span>: ____, <span style="color:#e6db74">&#34;OP&#34;</span>: ____}]
</span></span></code></pre></div><h2 id="large-scale-data-analysis-with-spacy">Large-scale data analysis with spaCy</h2>
<h3 id="vocab-hashes-lexeme">Vocab, hashes, lexeme</h3>
<p><code>vocab</code> stores data shared across multiple documents.  The <code>doc</code> contains words in context with their part-of-speech tags and dependencies. The <code>string store</code> maintains the text of the vocab hashes.</p>
<p>A <code>lexeme</code> object is an hash entry in the vocabulary <code>vocab</code>.  <code>lexemes</code> hold context-independent information about a word, like the text, or whether the the word consists of alphabetic characters.  Don&rsquo;t have part-of-speech tags, dependencies or entity labels. Those depend on the context.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>nlp<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>length
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">498
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#Hashes can&#39;t be reversed – that&#39;s why we need to provide the shared vocab</span>
</span></span><span style="display:flex;"><span>coffee_hash <span style="color:#f92672">=</span> nlp<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>strings[<span style="color:#e6db74">&#39;coffee&#39;</span>]
</span></span><span style="display:flex;"><span>print(coffee_hash)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">3197928453018144401
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Raises an error if we haven&#39;t seen the string before</span>
</span></span><span style="display:flex;"><span>string <span style="color:#f92672">=</span> nlp<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>strings[<span style="color:#ae81ff">3197928453018144401</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I love coffee&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;hash value:&#39;</span>, nlp<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>strings[<span style="color:#e6db74">&#39;coffee&#39;</span>], doc<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>strings[<span style="color:#e6db74">&#39;coffee&#39;</span>])
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;string value:&#39;</span>, nlp<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>strings[<span style="color:#ae81ff">3197928453018144401</span>])
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">hash value: 3197928453018144401 3197928453018144401
string value: coffee
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#contains the context-independent information</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I love coffee&#34;</span>)
</span></span><span style="display:flex;"><span>lexeme <span style="color:#f92672">=</span> nlp<span style="color:#f92672">.</span>vocab[<span style="color:#e6db74">&#39;coffee&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Print the lexical attributes</span>
</span></span><span style="display:flex;"><span>print(lexeme<span style="color:#f92672">.</span>text, lexeme<span style="color:#f92672">.</span>orth, lexeme<span style="color:#f92672">.</span>is_alpha)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">coffee 3197928453018144401 True
</code></pre>

</div>

<h3 id="doc-span-and-token">Doc, span, and token</h3>
<p><code>Doc</code> is created automatically when you process a text with the <code>nlp</code> object. But you can also instantiate the class manually.  It takes three arguments: the shared vocab, the words and the spaces.</p>
<p>A <code>Span</code> is a slice of a <code>Doc</code> consisting of one or more tokens. The <code>Span</code> takes at least three arguments: the doc it refers to, and the start and end index of the span (with end index exclusive).</p>
<p>Doc and Span are very powerful and hold references and relationships of words and sentences</p>
<ul>
<li>Convert result to strings as late as possible</li>
<li>Use token attributes if available – for example, token.i for the token index.  This will let you reuse it in spaCy.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Create an nlp object</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.lang.en <span style="color:#f92672">import</span> English
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> English()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Import the Doc class</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The words and spaces to create the doc from</span>
</span></span><span style="display:flex;"><span>words <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Hello&#39;</span>, <span style="color:#e6db74">&#39;world&#39;</span>, <span style="color:#e6db74">&#39;!&#39;</span>]
</span></span><span style="display:flex;"><span>spaces <span style="color:#f92672">=</span> [<span style="color:#66d9ef">True</span>, <span style="color:#66d9ef">False</span>, <span style="color:#66d9ef">False</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a doc manually</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> Doc(nlp<span style="color:#f92672">.</span>vocab, words<span style="color:#f92672">=</span>words, spaces<span style="color:#f92672">=</span>spaces)
</span></span><span style="display:flex;"><span>doc
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">Hello world!
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Import the Doc class</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Span
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a doc manually</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> Doc(nlp<span style="color:#f92672">.</span>vocab, words<span style="color:#f92672">=</span>words, spaces<span style="color:#f92672">=</span>spaces)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a span manually</span>
</span></span><span style="display:flex;"><span>span <span style="color:#f92672">=</span> Span(doc, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a span with a label</span>
</span></span><span style="display:flex;"><span>span_with_label <span style="color:#f92672">=</span> Span(doc, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;GREETING&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add span to the doc.ents</span>
</span></span><span style="display:flex;"><span>doc<span style="color:#f92672">.</span>ents <span style="color:#f92672">=</span> [span_with_label]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Print entities&#39; text and labels</span>
</span></span><span style="display:flex;"><span>print([(ent<span style="color:#f92672">.</span>text, ent<span style="color:#f92672">.</span>label_) <span style="color:#66d9ef">for</span> ent <span style="color:#f92672">in</span> doc<span style="color:#f92672">.</span>ents])
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">[(&#39;I like&#39;, &#39;GREETING&#39;)]
</code></pre>

</div>

<h3 id="similarity-and-vectors">Similarity and vectors</h3>
<p>In order to use similarity, you need a larger spaCy model that has word vectors included (<code>en_core_web_lg</code>, <code>en_core_web_md</code> – but not <code>_sm</code>).  That is because <code>similarity</code> is determined using word vectors.  Word vectors are generated using an algorithm like Word2Vec and lots of text.  The default distance is <code>cosine</code> similarity, but can be adjusted.</p>
<p>For a more in-depth look, the <a href="https://spacy.io/docs/usage/word-vectors-similarities">source code</a> for <code>.similarity</code> shows:</p>
<p><code>return numpy.dot(self.vector, other.vector) / (self.vector_norm * other.vector_norm)</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Load a larger model with vectors</span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_lg&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Compare two documents</span>
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like fast food&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like pizza&#34;</span>)
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>similarity(doc2))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like pizza and pasta&#34;</span>)
</span></span><span style="display:flex;"><span>token1 <span style="color:#f92672">=</span> doc[<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>token2 <span style="color:#f92672">=</span> doc[<span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>print(token1<span style="color:#f92672">.</span>similarity(token2))
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">0.8627203210548107
0.7369546
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_sm&#39;</span>)
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I&#34;</span>)
</span></span><span style="display:flex;"><span>print( doc1<span style="color:#f92672">.</span>vector<span style="color:#f92672">.</span>shape )
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">(96,)
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_lg&#39;</span>)
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I&#34;</span>)
</span></span><span style="display:flex;"><span>print( doc1<span style="color:#f92672">.</span>vector<span style="color:#f92672">.</span>shape )
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">(300,)
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_sm&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;like&#34;</span>)
</span></span><span style="display:flex;"><span>doc3 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like&#34;</span>)
</span></span><span style="display:flex;"><span>doc4 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like pizza&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print( doc1<span style="color:#f92672">.</span>vector<span style="color:#f92672">.</span>shape, <span style="color:#e6db74">&#39; &#39;</span>, doc1<span style="color:#f92672">.</span>vector_norm )
</span></span><span style="display:flex;"><span>print( doc2<span style="color:#f92672">.</span>vector<span style="color:#f92672">.</span>shape, <span style="color:#e6db74">&#39; &#39;</span>, doc2<span style="color:#f92672">.</span>vector_norm )
</span></span><span style="display:flex;"><span>print( doc3<span style="color:#f92672">.</span>vector<span style="color:#f92672">.</span>shape, <span style="color:#e6db74">&#39; &#39;</span>, doc3<span style="color:#f92672">.</span>vector_norm )
</span></span><span style="display:flex;"><span>print( doc4<span style="color:#f92672">.</span>vector<span style="color:#f92672">.</span>shape, <span style="color:#e6db74">&#39; &#39;</span>, doc4<span style="color:#f92672">.</span>vector_norm )
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">(96,)   23.1725315055188
(96,)   21.75560300132138
(96,)   17.23478412191207
(96,)   14.848700829346688
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc1[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>vector <span style="color:#f92672">==</span> doc3[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>vector
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">array([False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False])
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print( np<span style="color:#f92672">.</span>dot(doc1<span style="color:#f92672">.</span>vector, doc2<span style="color:#f92672">.</span>vector) )
</span></span><span style="display:flex;"><span>print( np<span style="color:#f92672">.</span>linalg<span style="color:#f92672">.</span>norm(doc2<span style="color:#f92672">.</span>vector, ord<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>) )
</span></span><span style="display:flex;"><span>print( np<span style="color:#f92672">.</span>linalg<span style="color:#f92672">.</span>norm(doc1<span style="color:#f92672">.</span>vector, ord<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>) <span style="color:#f92672">==</span> np<span style="color:#f92672">.</span>linalg<span style="color:#f92672">.</span>norm(doc2<span style="color:#f92672">.</span>vector, ord<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>) )
</span></span><span style="display:flex;"><span>print( doc2<span style="color:#f92672">.</span>vector_norm )
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">21.871986
4.6767497
True
4.676749731219555
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;pizza like I&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like pizza&#34;</span>)
</span></span><span style="display:flex;"><span>doc3 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;pizza I like&#34;</span>)
</span></span><span style="display:flex;"><span>doc4 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;like pizza I&#34;</span>)
</span></span><span style="display:flex;"><span>doc5 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I pizza like&#34;</span>)
</span></span><span style="display:flex;"><span>doc6 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;like I pizza&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>lDoc <span style="color:#f92672">=</span> [doc1, doc2, doc3, doc4, doc5, doc6]
</span></span><span style="display:flex;"><span>result <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>zeros((<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i,doc1 <span style="color:#f92672">in</span> enumerate(lDoc):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j, doc2 <span style="color:#f92672">in</span> enumerate(lDoc):
</span></span><span style="display:flex;"><span>        result[i,j] <span style="color:#f92672">=</span> doc1<span style="color:#f92672">.</span>similarity(doc2)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>result
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">array([[1.        , 0.99999994, 0.99999994, 0.99999995, 0.99999994,
        0.99999994],
       [0.99999994, 1.        , 0.99999993, 0.99999994, 0.99999993,
        0.99999992],
       [0.99999994, 0.99999993, 1.        , 0.99999994, 0.99999993,
        0.99999993],
       [0.99999995, 0.99999994, 0.99999994, 1.        , 0.99999994,
        0.99999994],
       [0.99999994, 0.99999993, 0.99999993, 0.99999994, 1.        ,
        0.99999993],
       [0.99999994, 0.99999992, 0.99999993, 0.99999994, 0.99999993,
        1.        ]])
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_lg&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;apples oranges fruit&#34;</span>)
</span></span><span style="display:flex;"><span>print( doc1[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>vector_norm )
</span></span><span style="display:flex;"><span>print( doc1[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>vector_norm )
</span></span><span style="display:flex;"><span>print( doc1[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>vector_norm )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print( doc1[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>similarity(doc1[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>print( doc1[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>similarity(doc1[<span style="color:#ae81ff">2</span>]))
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">6.895898
6.949064
7.294794
0.77809423
0.72417974
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;apples&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>vector_norm)
</span></span><span style="display:flex;"><span>print(doc2<span style="color:#f92672">.</span>vector_norm)
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>similarity(doc2))
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">6.895897646384268
6.895897762990182
1.0000000930092277
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;apples fruit&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples apples fruit&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>vector_norm)
</span></span><span style="display:flex;"><span>print(doc2<span style="color:#f92672">.</span>vector_norm)
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>similarity(doc2))
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">6.588359567392134
6.816139083280562
0.9383865534490474
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Load a larger model with vectors</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#nlp = spacy.load(&#39;en_core_web_lg&#39;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I have a banana&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Access the word vector via the token.vector attribute</span>
</span></span><span style="display:flex;"><span>vector <span style="color:#f92672">=</span> doc[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>vector
</span></span><span style="display:flex;"><span>print( type(vector) )
</span></span><span style="display:flex;"><span>print( vector<span style="color:#f92672">.</span>shape)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">&lt;class &#39;numpy.ndarray&#39;&gt;
(300,)
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>vector[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">10</span>]
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">array([ 0.20228 , -0.076618,  0.37032 ,  0.032845, -0.41957 ,  0.072069,
       -0.37476 ,  0.05746 , -0.012401,  0.52949 ], dtype=float32)
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#no universal definition for similarity </span>
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like cats&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I hate cats&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>similarity(doc2))
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">0.9501447503553421
</code></pre>

</div>

<h3 id="pattern-matching">Pattern matching</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.matcher <span style="color:#f92672">import</span> Matcher
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Twitch Prime, the perks program for Amazon Prime members offering free &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;loot, games and other benefits, is ditching one of its best features: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ad-free viewing. According to an email sent out to Amazon Prime members &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;today, ad-free viewing will no longer be included as a part of Twitch &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Prime for new members, beginning on September 14. However, members with &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;existing annual subscriptions will be able to continue to enjoy ad-free &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;viewing until their subscription comes up for renewal. Those with &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;monthly subscriptions will have access to ad-free viewing until October 15.&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create the match patterns</span>
</span></span><span style="display:flex;"><span>pattern1 <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;Amazon&#34;</span>}, {<span style="color:#e6db74">&#34;IS_TITLE&#34;</span>: <span style="color:#66d9ef">True</span>, <span style="color:#e6db74">&#34;POS&#34;</span>: <span style="color:#e6db74">&#34;PROPN&#34;</span>}]
</span></span><span style="display:flex;"><span>pattern2 <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;ad-free&#34;</span>}, {<span style="color:#e6db74">&#34;POS&#34;</span>: <span style="color:#e6db74">&#34;NOUN&#34;</span>}]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize the Matcher and add the patterns</span>
</span></span><span style="display:flex;"><span>matcher <span style="color:#f92672">=</span> Matcher(nlp<span style="color:#f92672">.</span>vocab)
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#34;PATTERN1&#34;</span>, <span style="color:#66d9ef">None</span>, pattern1)
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#34;PATTERN2&#34;</span>, <span style="color:#66d9ef">None</span>, pattern2)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Iterate over the matches</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> match_id, start, end <span style="color:#f92672">in</span> matcher(doc):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Print pattern string name and text of matched span</span>
</span></span><span style="display:flex;"><span>    print(doc<span style="color:#f92672">.</span>vocab<span style="color:#f92672">.</span>strings[match_id], doc[start:end]<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.lang.en <span style="color:#f92672">import</span> English
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;exercises/countries.json&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    COUNTRIES <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(f<span style="color:#f92672">.</span>read())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> English()
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;Czech Republic may help Slovakia protect its airspace&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Import the PhraseMatcher and initialize it</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.matcher <span style="color:#f92672">import</span> PhraseMatcher
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>matcher <span style="color:#f92672">=</span> PhraseMatcher(nlp<span style="color:#f92672">.</span>vocab)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create pattern Doc objects and add them to the matcher</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This is the faster version of: [nlp(country) for country in COUNTRIES]</span>
</span></span><span style="display:flex;"><span>patterns <span style="color:#f92672">=</span> list(nlp<span style="color:#f92672">.</span>pipe(COUNTRIES))
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#34;COUNTRY&#34;</span>, <span style="color:#66d9ef">None</span>, <span style="color:#f92672">*</span>patterns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call the matcher on the test document and print the result</span>
</span></span><span style="display:flex;"><span>matches <span style="color:#f92672">=</span> matcher(doc)
</span></span><span style="display:flex;"><span>print([doc[start:end] <span style="color:#66d9ef">for</span> match_id, start, end <span style="color:#f92672">in</span> matches])
</span></span></code></pre></div><h2 id="processing-pipelines">Processing Pipelines</h2>
<h3 id="oob-pipeline-components">OOB pipeline components</h3>
<p>First, the tokenizer is applied to turn the string of text into a Doc object. Next, a series of pipeline components is applied to the Doc in order. In this case, the tagger, then the parser, then the entity recognizer. Finally, the processed Doc is returned, so you can work with it.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Creates</th>
</tr>
</thead>
<tbody>
<tr>
<td>tagger</td>
<td>Part-of-speech tagger</td>
<td>Token.tag</td>
</tr>
<tr>
<td>parser</td>
<td>Dependency parser</td>
<td>Token.dep, Token.head, Doc.sents, Doc.noun_chunks</td>
</tr>
<tr>
<td>ner</td>
<td>Named entity recognizer</td>
<td>Doc.ents, Token.ent_iob, Token.ent_type</td>
</tr>
<tr>
<td>textcat</td>
<td>Text classifier</td>
<td>Doc.cats</td>
</tr>
</tbody>
</table>
<p>Because text categories are always very specific, the text classifier is not included in any of the pre-trained models by default. But you can use it to train your own system.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#initialize the language, add the pipeline and load in the binary model weights</span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;This is a sentence.&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#list of pipeline component names</span>
</span></span><span style="display:flex;"><span>print(nlp<span style="color:#f92672">.</span>pipe_names)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">[&#39;tagger&#39;, &#39;parser&#39;, &#39;ner&#39;]
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#list of (name, component) tuples</span>
</span></span><span style="display:flex;"><span>print(nlp<span style="color:#f92672">.</span>pipeline)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">[(&#39;tagger&#39;, &lt;spacy.pipeline.pipes.Tagger object at 0x7f4d64e3ada0&gt;), (&#39;parser&#39;, &lt;spacy.pipeline.pipes.DependencyParser object at 0x7f4d4ab97108&gt;), (&#39;ner&#39;, &lt;spacy.pipeline.pipes.EntityRecognizer object at 0x7f4d4ab97228&gt;)]
</code></pre>

</div>

<h3 id="custom-pipeline-components">Custom pipeline components</h3>
<p>Custom components are executed automatically when you call the nlp object on a text.  They&rsquo;re especially useful for adding your own custom metadata to documents and tokens.  You can also use them to update built-in attributes, like the named entity spans.</p>
<p>A custom component:</p>
<ul>
<li>takes a doc, modifies it and returns it</li>
<li>can be added using the nlp.add_pipe method</li>
</ul>
<p>Custom components can only modify the Doc and can’t be used to update weights of other components directly.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">custom_component</span>(doc, <span style="color:#f92672">&lt;</span>last,first,before,after<span style="color:#f92672">&gt;</span> ):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Do something to the doc here</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp<span style="color:#f92672">.</span>add_pipe(custom_component)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#simple component</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create the nlp object</span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_sm&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define a custom component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">custom_component</span>(doc):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Print the doc&#39;s length</span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;Doc length:&#39;</span>, len(doc))
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Return the doc object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add the component first in the pipeline</span>
</span></span><span style="display:flex;"><span>nlp<span style="color:#f92672">.</span>add_pipe(custom_component, first<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Print the pipeline component names</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;Pipeline:&#39;</span>, nlp<span style="color:#f92672">.</span>pipe_names)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Process a text</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;Hello world!&#34;</span>)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">Pipeline: [&#39;custom_component&#39;, &#39;tagger&#39;, &#39;parser&#39;, &#39;ner&#39;]
Doc length: 3
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.matcher <span style="color:#f92672">import</span> PhraseMatcher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Span
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span><span style="display:flex;"><span>animals <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;Golden Retriever&#34;</span>, <span style="color:#e6db74">&#34;cat&#34;</span>, <span style="color:#e6db74">&#34;turtle&#34;</span>, <span style="color:#e6db74">&#34;Rattus norvegicus&#34;</span>]
</span></span><span style="display:flex;"><span>animal_patterns <span style="color:#f92672">=</span> list(nlp<span style="color:#f92672">.</span>pipe(animals))
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;animal_patterns:&#34;</span>, animal_patterns)
</span></span><span style="display:flex;"><span>matcher <span style="color:#f92672">=</span> PhraseMatcher(nlp<span style="color:#f92672">.</span>vocab)
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#34;ANIMAL&#34;</span>, <span style="color:#66d9ef">None</span>, <span style="color:#f92672">*</span>animal_patterns)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define the custom component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">animal_component</span>(doc):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Apply the matcher to the doc</span>
</span></span><span style="display:flex;"><span>    matches <span style="color:#f92672">=</span> matcher(doc)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Create a Span for each match and assign the label &#39;ANIMAL&#39;</span>
</span></span><span style="display:flex;"><span>    spans <span style="color:#f92672">=</span> [Span(doc, start, end, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ANIMAL&#34;</span>) <span style="color:#66d9ef">for</span> match_id, start, end <span style="color:#f92672">in</span> matches]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Overwrite the doc.ents with the matched spans</span>
</span></span><span style="display:flex;"><span>    doc<span style="color:#f92672">.</span>ents <span style="color:#f92672">=</span> spans
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add the component to the pipeline after the &#39;ner&#39; component</span>
</span></span><span style="display:flex;"><span>nlp<span style="color:#f92672">.</span>add_pipe(animal_component, after<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ner&#34;</span>)
</span></span><span style="display:flex;"><span>print(nlp<span style="color:#f92672">.</span>pipe_names)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Process the text and print the text and label for the doc.ents</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I have a cat and a Golden Retriever&#34;</span>)
</span></span><span style="display:flex;"><span>print([(ent<span style="color:#f92672">.</span>text, ent<span style="color:#f92672">.</span>label_) <span style="color:#66d9ef">for</span> ent <span style="color:#f92672">in</span> doc<span style="color:#f92672">.</span>ents])
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">animal_patterns: [Golden Retriever, cat, turtle, Rattus norvegicus]
[&#39;tagger&#39;, &#39;parser&#39;, &#39;ner&#39;, &#39;animal_component&#39;]
[(&#39;cat&#39;, &#39;ANIMAL&#39;), (&#39;Golden Retriever&#39;, &#39;ANIMAL&#39;)]
</code></pre>

</div>

<h3 id="custom-span-attributes">Custom span attributes</h3>
<p>Custom attributes allow</p>
<ul>
<li>
<p>add custom metadata to documents, tokens and spans</p>
</li>
<li>
<p>accessible via the <code>._ property</code> to distinguish from built-in attr</p>
</li>
<li>
<p>registered on the global Doc, Token or Span using the set_extension method</p>
</li>
<li>
<p>Attribute extensions</p>
</li>
<li>
<p>Property extensions</p>
</li>
<li>
<p>Method extensions</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;My document&#39;</span>
</span></span><span style="display:flex;"><span>token<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>is_color <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>span<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>has_color <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Import global classes</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Doc, Token, Span
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set extensions on the Doc, Token and Span</span>
</span></span><span style="display:flex;"><span>Doc<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;title&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>Token<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;is_color&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>Span<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;has_color&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#Attribute extension</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Token
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set extension on the Token with default value</span>
</span></span><span style="display:flex;"><span>Token<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;is_color&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;The sky is blue.&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Overwrite extension attribute value</span>
</span></span><span style="display:flex;"><span>doc[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>is_color <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#Property (getter/setter) extension: Token</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Token
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define getter function</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_is_color</span>(token):
</span></span><span style="display:flex;"><span>    colors <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;red&#39;</span>, <span style="color:#e6db74">&#39;yellow&#39;</span>, <span style="color:#e6db74">&#39;blue&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> token<span style="color:#f92672">.</span>text <span style="color:#f92672">in</span> colors
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set extension on the Token with getter</span>
</span></span><span style="display:flex;"><span>Token<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;is_color&#39;</span>, getter<span style="color:#f92672">=</span>get_is_color, force<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;The sky is blue.&#34;</span>)
</span></span><span style="display:flex;"><span>print(doc[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>is_color, <span style="color:#e6db74">&#39;-&#39;</span>, doc[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">True - blue
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#Property (getter/setter) extension: Span</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Span
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define getter function</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_has_color</span>(span):
</span></span><span style="display:flex;"><span>    colors <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;red&#39;</span>, <span style="color:#e6db74">&#39;yellow&#39;</span>, <span style="color:#e6db74">&#39;blue&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> any(token<span style="color:#f92672">.</span>text <span style="color:#f92672">in</span> colors <span style="color:#66d9ef">for</span> token <span style="color:#f92672">in</span> span)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set extension on the Span with getter</span>
</span></span><span style="display:flex;"><span>Span<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;has_color&#39;</span>, getter<span style="color:#f92672">=</span>get_has_color)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;The sky is blue.&#34;</span>)
</span></span><span style="display:flex;"><span>print(doc[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">4</span>]<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>has_color, <span style="color:#e6db74">&#39;-&#39;</span>, doc[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">4</span>]<span style="color:#f92672">.</span>text)
</span></span><span style="display:flex;"><span>print(doc[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>has_color, <span style="color:#e6db74">&#39;-&#39;</span>, doc[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>text)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">True - sky is blue
False - The sky
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#Method (pass an argument) extension</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define method with arguments</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">has_token</span>(doc, token_text):
</span></span><span style="display:flex;"><span>    in_doc <span style="color:#f92672">=</span> token_text <span style="color:#f92672">in</span> [token<span style="color:#f92672">.</span>text <span style="color:#66d9ef">for</span> token <span style="color:#f92672">in</span> doc]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> in_doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set extension on the Doc with method</span>
</span></span><span style="display:flex;"><span>Doc<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;has_token&#39;</span>, method<span style="color:#f92672">=</span>has_token)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;The sky is blue.&#34;</span>)
</span></span><span style="display:flex;"><span>print(doc<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>has_token(<span style="color:#e6db74">&#39;blue&#39;</span>), <span style="color:#e6db74">&#39;- blue&#39;</span>)
</span></span><span style="display:flex;"><span>print(doc<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>has_token(<span style="color:#e6db74">&#39;cloud&#39;</span>), <span style="color:#e6db74">&#39;- cloud&#39;</span>)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">True - blue
False - cloud
</code></pre>

</div>

<h3 id="scaling-and-performance">Scaling and performance</h3>
<h4 id="streaming">Streaming</h4>
<ul>
<li>Use <code>nlp.pipe</code> method</li>
<li>Processes texts as a stream, yields Doc objects</li>
<li>Much faster than calling nlp on each text</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">%</span>timeit 
</span></span><span style="display:flex;"><span>docs <span style="color:#f92672">=</span> [nlp(text) <span style="color:#66d9ef">for</span> text <span style="color:#f92672">in</span> LOTS_OF_TEXTS]
</span></span><span style="display:flex;"><span><span style="color:#75715e">#bad</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">%</span>timeit
</span></span><span style="display:flex;"><span>docs <span style="color:#f92672">=</span> list(nlp<span style="color:#f92672">.</span>pipe(LOTS_OF_TEXTS))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#good</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#this idiom is useful for associating metadata with the doc</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> Doc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Doc<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;id&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>Doc<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#39;page_number&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#39;This is a text&#39;</span>, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;page_number&#39;</span>: <span style="color:#ae81ff">15</span>}),
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#39;And another text&#39;</span>, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;page_number&#39;</span>: <span style="color:#ae81ff">16</span>}),
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> doc, context <span style="color:#f92672">in</span> nlp<span style="color:#f92672">.</span>pipe(data, as_tuples<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>):
</span></span><span style="display:flex;"><span>    doc<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>id <span style="color:#f92672">=</span> context[<span style="color:#e6db74">&#39;id&#39;</span>]
</span></span><span style="display:flex;"><span>    doc<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>page_number <span style="color:#f92672">=</span> context[<span style="color:#e6db74">&#39;page_number&#39;</span>]
</span></span></code></pre></div><h4 id="pipeline-configuration">Pipeline configuration</h4>
<p>Only run the models you need.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#slow</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;Hello world&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#fast - only runs tokenizer, not all models</span>
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp<span style="color:#f92672">.</span>make_doc(<span style="color:#e6db74">&#34;Hello world!&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#disable tagger and parser</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#restores them after the with block</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> nlp<span style="color:#f92672">.</span>disable_pipes(<span style="color:#e6db74">&#39;tagger&#39;</span>, <span style="color:#e6db74">&#39;parser&#39;</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Process the text and print the entities</span>
</span></span><span style="display:flex;"><span>    doc <span style="color:#f92672">=</span> nlp(text)
</span></span><span style="display:flex;"><span>    print(doc<span style="color:#f92672">.</span>ents)
</span></span></code></pre></div><h2 id="training-a-neural-network-model">Training a neural network model</h2>
<p>List of english models, <a href="https://spacy.io/models/en">here</a></p>
<p>SpaCy supports updating existing models with more examples, and training new models.</p>
<ul>
<li>Update an existing model: a few hundred to a few thousand examples</li>
<li>Train a new category: a few thousand to a million examples; spaCy&rsquo;s English models: 2 million words</li>
</ul>
<p>This is essential for text classification, very useful for entity recognition and a little less critical for tagging and parsing.</p>
<h3 id="creating-training-data">Creating training data</h3>
<p>The entity recognizer predicts entities in context, it also needs to be trained on entities and their surrounding context.</p>
<p>Use <code>Matcher</code> to quickly create training data for NER models.</p>
<ul>
<li>Create a doc object for each text using nlp.pipe.</li>
<li>Match on the doc and create a list of matched spans.</li>
<li>Get (start character, end character, label) tuples of matched spans.</li>
<li>Format each example as a tuple of the text and a dict, mapping &rsquo;entities&rsquo; to the entity tuples.</li>
<li>Append the example to TRAINING_DATA and inspect the printed data.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.matcher <span style="color:#f92672">import</span> Matcher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.lang.en <span style="color:#f92672">import</span> English
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TEXTS <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;New iPhone X release date leaked as Apple reveals pre-orders by mistake&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> English()
</span></span><span style="display:flex;"><span>matcher <span style="color:#f92672">=</span> Matcher(nlp<span style="color:#f92672">.</span>vocab)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Two tokens whose lowercase forms match &#39;iphone&#39; and &#39;x&#39;</span>
</span></span><span style="display:flex;"><span>pattern1 <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;iphone&#34;</span>}, {<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;x&#34;</span>}]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Token whose lowercase form matches &#39;iphone&#39; and an optional digit</span>
</span></span><span style="display:flex;"><span>pattern2 <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;iphone&#34;</span>}, {<span style="color:#e6db74">&#34;IS_DIGIT&#34;</span>: <span style="color:#66d9ef">True</span>, <span style="color:#e6db74">&#34;OP&#34;</span>: <span style="color:#e6db74">&#34;?&#34;</span>}]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add patterns to the matcher</span>
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#34;GADGET&#34;</span>, <span style="color:#66d9ef">None</span>, pattern1, pattern2)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.matcher <span style="color:#f92672">import</span> Matcher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.lang.en <span style="color:#f92672">import</span> English
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;exercises/iphone.json&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    TEXTS <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(f<span style="color:#f92672">.</span>read())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> English()
</span></span><span style="display:flex;"><span>matcher <span style="color:#f92672">=</span> Matcher(nlp<span style="color:#f92672">.</span>vocab)
</span></span><span style="display:flex;"><span>pattern1 <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;iphone&#34;</span>}, {<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;x&#34;</span>}]
</span></span><span style="display:flex;"><span>pattern2 <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;LOWER&#34;</span>: <span style="color:#e6db74">&#34;iphone&#34;</span>}, {<span style="color:#e6db74">&#34;IS_DIGIT&#34;</span>: <span style="color:#66d9ef">True</span>, <span style="color:#e6db74">&#34;OP&#34;</span>: <span style="color:#e6db74">&#34;?&#34;</span>}]
</span></span><span style="display:flex;"><span>matcher<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#34;GADGET&#34;</span>, <span style="color:#66d9ef">None</span>, pattern1, pattern2)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TRAINING_DATA <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a Doc object for each text in TEXTS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> doc <span style="color:#f92672">in</span> nlp<span style="color:#f92672">.</span>pipe(TEXTS):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Match on the doc and create a list of matched spans</span>
</span></span><span style="display:flex;"><span>    spans <span style="color:#f92672">=</span> [doc[start:end] <span style="color:#66d9ef">for</span> match_id, start, end <span style="color:#f92672">in</span> matcher(doc)]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Get (start character, end character, label) tuples of matches</span>
</span></span><span style="display:flex;"><span>    entities <span style="color:#f92672">=</span> [(span<span style="color:#f92672">.</span>start_char, span<span style="color:#f92672">.</span>end_char, <span style="color:#e6db74">&#34;GADGET&#34;</span>) <span style="color:#66d9ef">for</span> span <span style="color:#f92672">in</span> spans]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Format the matches as a (doc.text, entities) tuple</span>
</span></span><span style="display:flex;"><span>    training_example <span style="color:#f92672">=</span> (doc<span style="color:#f92672">.</span>text, {<span style="color:#e6db74">&#34;entities&#34;</span>: entities})
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Append the example to the training data</span>
</span></span><span style="display:flex;"><span>    TRAINING_DATA<span style="color:#f92672">.</span>append(training_example)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#f92672">*</span>TRAINING_DATA, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><h3 id="training-the-model">Training the model</h3>
<ul>
<li>Loop for a number of times.</li>
<li>Shuffle the training data.</li>
<li>Divide the data into batches.</li>
<li>Update the model for each batch.</li>
<li>Save the updated model.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> random
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;exercises/gadgets.json&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    TRAINING_DATA <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(f<span style="color:#f92672">.</span>read())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>blank(<span style="color:#e6db74">&#34;en&#34;</span>)
</span></span><span style="display:flex;"><span>ner <span style="color:#f92672">=</span> nlp<span style="color:#f92672">.</span>create_pipe(<span style="color:#e6db74">&#34;ner&#34;</span>)
</span></span><span style="display:flex;"><span>nlp<span style="color:#f92672">.</span>add_pipe(ner)
</span></span><span style="display:flex;"><span>ner<span style="color:#f92672">.</span>add_label(<span style="color:#e6db74">&#34;GADGET&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Start the training</span>
</span></span><span style="display:flex;"><span>nlp<span style="color:#f92672">.</span>begin_training()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Loop for 10 iterations</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> itn <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Shuffle the training data</span>
</span></span><span style="display:flex;"><span>    random<span style="color:#f92672">.</span>shuffle(TRAINING_DATA)
</span></span><span style="display:flex;"><span>    losses <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Batch the examples and iterate over them</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> batch <span style="color:#f92672">in</span> spacy<span style="color:#f92672">.</span>util<span style="color:#f92672">.</span>minibatch(TRAINING_DATA, size<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        texts <span style="color:#f92672">=</span> [text <span style="color:#66d9ef">for</span> text, entities <span style="color:#f92672">in</span> batch]
</span></span><span style="display:flex;"><span>        annotations <span style="color:#f92672">=</span> [entities <span style="color:#66d9ef">for</span> text, entities <span style="color:#f92672">in</span> batch]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Update the model</span>
</span></span><span style="display:flex;"><span>        nlp<span style="color:#f92672">.</span>update(texts, annotations, losses<span style="color:#f92672">=</span>losses)
</span></span><span style="display:flex;"><span>        print(losses)
</span></span></code></pre></div><p>Problems with updating:</p>
<ul>
<li>if you don&rsquo;t provide examples of original labels, then it will &lsquo;forget&rsquo; them by adjusting too much to the new data</li>
<li>label scheme needs to be consistent and not too specific, for example: CLOTHING is better than ADULT_CLOTHING and CHILDRENS_CLOTHING</li>
</ul>
<p>You can create those additional examples by running the existing model over data and extracting the entity spans you care about.  You can then mix those examples in with your existing data and update the model with annotations of all labels.</p>
<p>If the decision is difficult to make based on the context, the model can struggle to learn it.  The label scheme also needs to be consistent and not too specific.  You can always add a rule-based system later to go from generic to specific.</p>
<h2 id="applications">Applications</h2>
<h3 id="working-on-customer-environment">Working on customer environment</h3>
<p>Serialization refers to the process of converting an object in memory to a byte stream that can be stored on disk or sent over a network.  This SpaCy guide provides the latest recommendations, <a href="https://spacy.io/usage/saving-loading">ref</a>.</p>
<p>The DocBin class lets you efficiently serialize the information from a collection of Doc objects. You can control which information is serialized by passing a list of attribute IDs, and optionally also specify whether the user data is serialized. The DocBin is faster and produces smaller data sizes than pickle, and allows you to deserialize without executing arbitrary Python code.</p>
<h4 id="typical-serialization">Typical serialization</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Load a larger model with vectors</span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;en_core_web_lg&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Compare two documents</span>
</span></span><span style="display:flex;"><span>doc1 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like fast food&#34;</span>)
</span></span><span style="display:flex;"><span>doc2 <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;I like pizza&#34;</span>)
</span></span><span style="display:flex;"><span>print(doc1<span style="color:#f92672">.</span>similarity(doc2))
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">---------------------------------------------------------------------------
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">NameError                                 Traceback (most recent call last)
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">&lt;ipython-input-3-a430716dafad&gt; in &lt;module&gt;()
      1 # Load a larger model with vectors
----&gt; 2 nlp = spacy.load(&#39;en_core_web_lg&#39;)
      3 
      4 # Compare two documents
      5 doc1 = nlp(&#34;I like fast food&#34;)
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">NameError: name &#39;spacy&#39; is not defined
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span> ls <span style="color:#f92672">../</span>tmp;
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">spacy-pizza.bz	spacy-pizza.mdl
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pickle
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data_dict <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;doc1&#39;</span>:doc1,<span style="color:#e6db74">&#39;nlp&#39;</span>:nlp}
</span></span><span style="display:flex;"><span>filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;../tmp/spacy-pizza.mdl&#39;</span>
</span></span><span style="display:flex;"><span>outfile <span style="color:#f92672">=</span> open(filename,<span style="color:#e6db74">&#39;wb&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pickle<span style="color:#f92672">.</span>dump(data_dict, outfile)
</span></span><span style="display:flex;"><span>outfile<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">---------------------------------------------------------------------------
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">NameError                                 Traceback (most recent call last)
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">&lt;ipython-input-2-9c7a736efa99&gt; in &lt;module&gt;()
      1 import pickle
      2 
----&gt; 3 data_dict = {&#39;doc1&#39;:doc1,&#39;nlp&#39;:nlp}
      4 filename = &#39;../tmp/spacy-pizza.mdl&#39;
      5 outfile = open(filename,&#39;wb&#39;)
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">NameError: name &#39;doc1&#39; is not defined
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>infile <span style="color:#f92672">=</span> open(filename,<span style="color:#e6db74">&#39;rb&#39;</span>)
</span></span><span style="display:flex;"><span>new_dict <span style="color:#f92672">=</span> pickle<span style="color:#f92672">.</span>load(infile)
</span></span><span style="display:flex;"><span>infile<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>new_dict[<span style="color:#e6db74">&#39;doc1&#39;</span>]<span style="color:#f92672">.</span>similarity(doc2)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">/opt/conda/envs/beakerx/lib/python3.6/runpy.py:193: ModelsWarning: [W007] The model you&#39;re using has no word vectors loaded, so the result of the Doc.similarity method will be based on the tagger, parser and NER, which may not give useful similarity judgements. This may happen if you&#39;re using one of the small models, e.g. `en_core_web_sm`, which don&#39;t ship with word vectors and only use context-sensitive tensors. You can always add your own word vectors, or use one of the larger models instead if available.
  &#34;__main__&#34;, mod_spec)
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">0.953127971438058
</code></pre>

</div>

<h4 id="serialization-with-compression">Serialization with compression</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> bz2
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pickle
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;../tmp/spacy-pizza.bz&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#sfile = bz2.BZ2File(&#39;smallerfile&#39;, &#39;w&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#pickle.dump(data_dict, sfile)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#outfile.close()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>outfile <span style="color:#f92672">=</span> bz2<span style="color:#f92672">.</span>BZ2File(filename, <span style="color:#e6db74">&#39;wb&#39;</span>)
</span></span><span style="display:flex;"><span>pickle<span style="color:#f92672">.</span>dump(data_dict, outfile, protocol<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>outfile<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span> ls <span style="color:#f92672">../</span>tmp
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">spacy-pizza.bz	spacy-pizza.mdl
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>infile <span style="color:#f92672">=</span> bz2<span style="color:#f92672">.</span>BZ2File(filename, <span style="color:#e6db74">&#39;rb&#39;</span>)
</span></span><span style="display:flex;"><span>myobj <span style="color:#f92672">=</span> pickle<span style="color:#f92672">.</span>load(infile)
</span></span><span style="display:flex;"><span>infile<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>myobj
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">{&#39;doc1&#39;: This is a sentence., &#39;nlp&#39;: &lt;spacy.lang.en.English at 0x7f4d606145c0&gt;}
</code></pre>

</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>myobj[<span style="color:#e6db74">&#39;doc1&#39;</span>]<span style="color:#f92672">.</span>similarity(doc2)
</span></span></code></pre></div><div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">/opt/conda/envs/beakerx/lib/python3.6/runpy.py:193: ModelsWarning: [W007] The model you&#39;re using has no word vectors loaded, so the result of the Doc.similarity method will be based on the tagger, parser and NER, which may not give useful similarity judgements. This may happen if you&#39;re using one of the small models, e.g. `en_core_web_sm`, which don&#39;t ship with word vectors and only use context-sensitive tensors. You can always add your own word vectors, or use one of the larger models instead if available.
  &#34;__main__&#34;, mod_spec)
</code></pre>

</div>

<div class="output">

<pre tabindex="0"><code class="language-nb-output" data-lang="nb-output">0.953127971438058
</code></pre>

</div>

<h4 id="spacy-method-for-encapsulating-texts">SpaCy method for encapsulating texts</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#fast method</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.attrs <span style="color:#f92672">import</span> LOWER, POS, ENT_TYPE, IS_ALPHA
</span></span><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># All strings mapped to integers, for easy export to numpy</span>
</span></span><span style="display:flex;"><span>np_array <span style="color:#f92672">=</span> doc<span style="color:#f92672">.</span>to_array([LOWER, POS, ENT_TYPE, IS_ALPHA])
</span></span><span style="display:flex;"><span>np_array <span style="color:#f92672">=</span> doc<span style="color:#f92672">.</span>to_array(<span style="color:#e6db74">&#34;POS&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pickle
</span></span><span style="display:flex;"><span>serialized <span style="color:#f92672">=</span> pickle<span style="color:#f92672">.</span>dumps(np_array, protocol<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>) <span style="color:#75715e"># protocol 0 is printable ASCII</span>
</span></span><span style="display:flex;"><span>deserialized_array <span style="color:#f92672">=</span> pickle<span style="color:#f92672">.</span>loads(serialized)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#comprehensive approach</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> spacy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> spacy.tokens <span style="color:#f92672">import</span> DocBin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>doc_bin <span style="color:#f92672">=</span> DocBin(attrs<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;LEMMA&#34;</span>, <span style="color:#e6db74">&#34;ENT_IOB&#34;</span>, <span style="color:#e6db74">&#34;ENT_TYPE&#34;</span>], store_user_data<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>texts <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;Some text&#34;</span>, <span style="color:#e6db74">&#34;Lots of texts...&#34;</span>, <span style="color:#e6db74">&#34;...&#34;</span>]
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#34;en_core_web_sm&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> doc <span style="color:#f92672">in</span> nlp<span style="color:#f92672">.</span>pipe(texts):
</span></span><span style="display:flex;"><span>    doc_bin<span style="color:#f92672">.</span>add(doc)
</span></span><span style="display:flex;"><span>bytes_data <span style="color:#f92672">=</span> doc_bin<span style="color:#f92672">.</span>to_bytes()    <span style="color:#75715e">#.to_disk(&#34;/path&#34;)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Deserialize later, e.g. in a new process</span>
</span></span><span style="display:flex;"><span>nlp <span style="color:#f92672">=</span> spacy<span style="color:#f92672">.</span>blank(<span style="color:#e6db74">&#34;en&#34;</span>)
</span></span><span style="display:flex;"><span>doc_bin <span style="color:#f92672">=</span> DocBin()<span style="color:#f92672">.</span>from_bytes(bytes_data)    <span style="color:#75715e">#.from_disk(&#34;/path&#34;)</span>
</span></span><span style="display:flex;"><span>docs <span style="color:#f92672">=</span> list(doc_bin<span style="color:#f92672">.</span>get_docs(nlp<span style="color:#f92672">.</span>vocab))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docs <span style="color:#f92672">=</span> list(doc_bin<span style="color:#f92672">.</span>get_docs(nlp<span style="color:#f92672">.</span>vocab))
</span></span><span style="display:flex;"><span>Doc<span style="color:#f92672">.</span>set_extension(<span style="color:#e6db74">&#34;my_custom_attr&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>print([doc<span style="color:#f92672">.</span>_<span style="color:#f92672">.</span>my_custom_attr <span style="color:#66d9ef">for</span> doc <span style="color:#f92672">in</span> docs])
</span></span></code></pre></div><h4 id="pickle-doc-to-include-dependencies">Pickle Doc to include dependencies</h4>
<p>When pickling spaCy’s objects like the <code>Doc</code> or the <code>EntityRecognizer</code>, keep in mind that they all require the shared <code>Vocab</code> (which includes the string to hash mappings, label schemes and optional vectors). This means that their pickled representations can become very large, especially if you have word vectors loaded, because it won’t only include the object itself, but also the entire shared vocab it depends on.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>doc <span style="color:#f92672">=</span> nlp(<span style="color:#e6db74">&#34;This is a sentence.&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> len(nlp<span style="color:#f92672">.</span>vocab) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;doc&#34;</span>:doc, <span style="color:#e6db74">&#34;nlp&#34;</span>:nlp}
</span></span></code></pre></div>
        </div>

        
        
        <div class="article-toc" style="display:none;">
            <h3>Contents</h3>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#configure-environment">Configure Environment</a></li>
    <li><a href="#finding-words-phrases-names-and-concepts">Finding words, phrases, names and concepts</a>
      <ul>
        <li><a href="#documents-spans-and-tokens">Documents, spans, and tokens</a></li>
        <li><a href="#lexical-attributes">Lexical attributes</a></li>
        <li><a href="#context-specific-linguistic-attributes-using-models">Context-specific linguistic attributes (using models)</a></li>
        <li><a href="#rule-based-matching">Rule-based matching</a></li>
      </ul>
    </li>
    <li><a href="#large-scale-data-analysis-with-spacy">Large-scale data analysis with spaCy</a>
      <ul>
        <li><a href="#vocab-hashes-lexeme">Vocab, hashes, lexeme</a></li>
        <li><a href="#doc-span-and-token">Doc, span, and token</a></li>
        <li><a href="#similarity-and-vectors">Similarity and vectors</a></li>
        <li><a href="#pattern-matching">Pattern matching</a></li>
      </ul>
    </li>
    <li><a href="#processing-pipelines">Processing Pipelines</a>
      <ul>
        <li><a href="#oob-pipeline-components">OOB pipeline components</a></li>
        <li><a href="#custom-pipeline-components">Custom pipeline components</a></li>
        <li><a href="#custom-span-attributes">Custom span attributes</a></li>
        <li><a href="#scaling-and-performance">Scaling and performance</a></li>
      </ul>
    </li>
    <li><a href="#training-a-neural-network-model">Training a neural network model</a>
      <ul>
        <li><a href="#creating-training-data">Creating training data</a></li>
        <li><a href="#training-the-model">Training the model</a></li>
      </ul>
    </li>
    <li><a href="#applications">Applications</a>
      <ul>
        <li><a href="#working-on-customer-environment">Working on customer environment</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
        
        

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
        <script>
            (function() {
                var $toc = $('#TableOfContents');
                if ($toc.length > 0) {
                    var $window = $(window);

                    function onScroll(){
                        var currentScroll = $window.scrollTop();
                        var h = $('.article-entry h1, .article-entry h2, .article-entry h3, .article-entry h4, .article-entry h5, .article-entry h6');
                        var id = "";
                        h.each(function (i, e) {
                            e = $(e);
                            if (e.offset().top - 10 <= currentScroll) {
                                id = e.attr('id');
                            }
                        });
                        var active = $toc.find('a.active');
                        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

                        active.each(function (i, e) {
                            $(e).removeClass('active').siblings('ul').hide();
                        });
                        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                            $(e).children('a').addClass('active').siblings('ul').show();
                        });
                    }

                    $window.on('scroll', onScroll);
                    $(document).ready(function() {
                        $toc.find('a').parent('li').find('ul').hide();
                        onScroll();
                        document.getElementsByClassName('article-toc')[0].style.display = '';
                    });
                }
            })();
        </script>
        


        
        <footer class="article-footer">
            <ul class="article-tag-list">
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://imtorgdemo.github.io//tags/nlp">nlp
                    </a>
                </li>
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://imtorgdemo.github.io//tags/spacy">spacy
                    </a>
                </li>
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://imtorgdemo.github.io//tags/nltk">nltk
                    </a>
                </li>
                
            </ul>
        </footer>
        
    </div>
    <nav id="article-nav">
    
    <a href="/posts/blog_programming-language_syntax_comparison/" id="article-nav-newer" class="article-nav-link-wrap">
        <div class="article-nav-title"><span>&lt;</span>&nbsp;
            Syntax Comparisons Across Languages
        </div>
    </a>
    
    
    <a href="/posts/blog_nlp-history_nlp_deep_learn/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">Historical Background of NLP with Deep Learning&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>

</article>

        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2023 IMTorg Kbase
            <br />
            <b> Want to discuss software?</b><br>Send me a message <a href="mailto:information@mgmt-tech.org?Subject=Open%20Software" target="_top"></a> information@mgmt-tech.org
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha256-ExtbCSBuYA7kq1Pz362ibde9nnsHYPt6JxuxYeZbU+c=" crossorigin="anonymous"></script>
        <script>renderMathInElement(document.body);</script>
    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
    <script 
	src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js" 
	integrity="sha256-34Si1Y6llMBKM3G0jQILVeoQKEwuxjbk4zGWXXMT4ps=" 
	crossorigin="anonymous"></script>
	<script src="https://imtorgdemo.github.io/js/search.js"></script>
</footer>
</div>
</body>
</html>
